<!DOCTYPE html>
<html lang="fr" class="hmax-md:text-smaller hmax-sm:text-smallest">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Rochas Architecte</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

    <link rel="stylesheet" type="text/css" href="/css/base.css" />
    <style>
      #progress-container {
        width: 1200px;
        height: 1200px;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-110%, -50%);
      }

      #progress-svg {
        width: 100%;
        height: 100%;
      }

      #progress-circle {
        fill: none;
        stroke: url(#image-pattern);
        stroke-width: 110;
        stroke-linecap: butt;
        stroke-dasharray: 1650;
        stroke-dashoffset: -100;
        transform-origin: center;
        transform: rotate(0deg);
      }
    </style>
  </head>
  <body>
    <div id="cursor"></div>
    <div id="cursor-border"></div>
    <div
      id="loader"
      class="z-50 inset-0 bg-light dark:bg-dark transition duration-300 flex items-center justify-center pointer-events-none"
      data-hide="opacity-0"
    ></div>
    <div class="navbar" data-cursor="pointer">
      <a href="/">
        <img
          src="/pictures/logo_arch.png"
          width="120"
          height="120"
          class="img"
        />
      </a>
      <div class="flex">
        <a href="/works">All</a>
        <a href="/about">About</a>
      </div>
    </div>
    <main>
      <div id="content" class="overflow-y-auto">
        <div class="relative flex flex-col items-center md:h-screen">
          <div id="scroller" class="h-full max-w-full relative">
            <svg
              height="100"
              width="1920"
              class="mx-auto w-full h-auto md:h-full md:w-auto object-contain object-center"
            ></svg>
            <div class="vignette"></div>

            <div
              id="slider"
              class="inset-0 absolute"
              data-images='[
                "/pictures/villa/a_b1.webp",
                "/pictures/villa/a_m1.webp",
                         "/pictures/villa/balzac1.webp",
                         "/pictures/villa/c_w1.webp",
                         "/pictures/immeuble/embc2.webp",
                         "/pictures/villa/f_m1.webp",
                         "/pictures/immeuble/grissa1.webp",
                         "/pictures/villa/h_b.webp",
                         "/pictures/villa/i_s1.webp",
                         "/pictures/immeuble/k_a1.jpg",
                         "/pictures/immeuble/k_d1.webp",
                         "/pictures/immeuble/kaiser1.webp",
                         "/pictures/villa/m_b1.jpg",
                         "/pictures/immeuble/m_g1.webp",
                         "/pictures/immeuble/n_g1.webp",
                         "/pictures/immeuble/r_g1.webp",
                         "/pictures/villa/s_z.webp",
                         "/pictures/industrie/showroom1.webp",
                         "/pictures/immeuble/verde1.webp",
                         "/pictures/immeuble/west1.webp",
                         "/pictures/immeuble/wight.webp",
                         "/pictures/villa/z_b_exterieur1.webp",
                         "/pictures/immeuble/z_g1.webp",
                         "/pictures/villa/z_s1.webp",
                         "/pictures/villa/z_z_exterieur1.webp"
                         ]'
            ></div>
            <div
              id="slider-nav"
              data-current="0"
              class="flex flex-col fixed top-1/2 right-4 md:right-7 transform -translate-y-1/2"
            >
              <div id="progress-container">
                <svg id="progress-svg" viewBox="0 0 1000 1000">
                  <defs>
                    <pattern
                      id="image-pattern"
                      patternUnits="userSpaceOnUse"
                      height="100%"
                      width="100%"
                      r="240"
                    >
                      <image
                        width="100%"
                        height="100%"
                        xlink:href="/pictures/villa/a_b1.webp"
                      ></image>
                    </pattern>
                  </defs>
                  <circle
                    id="progress-circle"
                    cx="500"
                    cy="500"
                    r="240"
                  ></circle>
                </svg>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <div id="data-trigger-scroller"></div>

    <script src="/js/three.js"></script>
    <script src="/js/sketch.js"></script>
    <script src="/js/effect.js"></script>
    <script src="/js/ux.js"></script>
    <script src="/js/cursor.js"></script>
    <script>
      function animateProgressCircle() {
        const progressCircle = document.getElementById("progress-circle");
        const circumference = progressCircle.getTotalLength();

        progressCircle.style.strokeDasharray = circumference;
        progressCircle.style.strokeDashoffset = circumference;

        gsap.to(progressCircle, {
          strokeDashoffset: 0,
          duration: 2,
          ease: "power2.inOut",
        });
      }

      ScrollTrigger.create({
        markers: true,
        start: "top 30%",
        end: "bottom 0",
        onEnter: () => {
          animateProgressCircle();
        },
      });
    </script>
  </body>
</html>
